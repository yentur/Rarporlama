<!DOCTYPE html>
<html>
<head>
  <title>Dinamik Line Chart</title>
  <!-- ECharts kütüphanesi CDN -->
  <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
</head>
<body>
  <div id="chart" style="width: 800px; height: 400px;"></div>

  <script>
    // ECharts grafiği oluştur
    var chart = echarts.init(document.getElementById('chart'));

    function fetchData() {
      // Sunucudan verileri al
      fetch('/get_data')
        .then(response => response.json())
        .then(data => {
          console.log(data);
          chart.setOption({
            xAxis: {
              type: 'category',
              data: data.map(item => item.x)
            },
            yAxis: {
              type: 'value'
            },
            series: [{
              data: data.map(item => item.y),
              type: 'line'
            }]
          });
        });
        
    }

    // Belirli aralıklarla verileri güncelle
    setInterval(fetchData, 2000);
    fetchData();  // İlk çağrı

  </script>
</body>
</html>
